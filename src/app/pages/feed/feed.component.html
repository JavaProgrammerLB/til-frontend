<ng-container
  *ngTemplateOutlet="
    posts;
    context: {
      posts: postsSig(),
      loading: loadingSig()
    }
  "
/>

<ng-template #posts let-posts="posts" let-loading="loading">
  <section class="flex flex-col gap-4 px-8 py-20 max-md:px-4">
    <h2 class="text-4xl font-bold">Feed</h2>
    @for (post of posts; track post.postId) {
      @defer (on viewport) {
        <til-til-item [post]="post" (loaded)="loaded($event)" />
      } @placeholder {
        <til-til-item [post]="post" />
      }
    }
    @if (loading) {
      <div class="mt-4 flex justify-center">
        <span class="loading loading-spinner loading-lg"></span>
      </div>
    }
  </section>
</ng-template>
