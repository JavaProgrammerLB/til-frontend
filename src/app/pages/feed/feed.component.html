<ng-container
  *ngTemplateOutlet="
    posts;
    context: {
      posts: postsSig(),
      loading: loadingSig()
    }
  "
/>

<ng-template #posts let-posts="posts" let-loading="loading">
  <section class="flex flex-col gap-4 px-8 py-20 max-md:px-4">
    <h2 class="text-4xl font-bold">Feed</h2>
    <div class="flex gap-4">
      <div class="flex w-full flex-col gap-4">
        @for (post of posts; track post.postId) {
          <article>
            @defer (on viewport) {
              <til-til-item [post]="post" (loaded)="loaded($event)" />
            } @placeholder {
              <til-til-item [post]="post" />
            }
          </article>
        }
        @if (loading) {
          <div
            class="mt-4 flex flex-col items-center justify-center gap-2 opacity-60"
          >
            <span
              class="loading loading-spinner loading-lg bg-typography-primary"
            ></span>
            <p class="text-sm font-semibold">Loading</p>
          </div>
        }
      </div>
      <til-feed-menu />
    </div>
  </section>
</ng-template>
