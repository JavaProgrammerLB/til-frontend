<ng-container
  *ngTemplateOutlet="
    posts;
    context: {
      posts: postsSig(),
      loading: loadingSig()
    }
  "
/>

<ng-template #posts let-posts="posts" let-loading="loading">
  <section class="flex flex-col gap-4 px-8 py-20 max-md:px-4">
    <h2 class="text-4xl font-bold">Feed</h2>
    <div class="flex gap-4">
      <div class="flex w-full flex-col gap-4">
        @for (post of posts; track post.postId) {
          <article>
            @defer (on viewport) {
              <til-til-item [post]="post" (loaded)="loaded($event)" />
            } @placeholder {
              <til-til-item [post]="post" />
            }
          </article>
        }
        @if (loading) {
          <div class="mt-4 flex justify-center">
            <span class="loading loading-spinner loading-lg"></span>
          </div>
        }
      </div>
      <aside class="sticky top-16 h-screen w-[350px] flex-shrink-0">
        <h3 class="mb-2 text-2xl font-bold">Your statistics</h3>
        <div class="flex flex-col gap-4">
          <div class="rounded-lg bg-blue-200 p-4">
            <h2 class="text-4xl font-bold">2 day</h2>
            <p class="text-xl font-bold">Learning streak</p>
          </div>
          <div class="rounded-lg bg-blue-200 p-4">
            <h2 class="text-4xl font-bold">2 day</h2>
            <p class="text-xl font-bold">Learning streak</p>
          </div>
          <div class="rounded-lg bg-blue-200 p-4">
            <h2 class="text-4xl font-bold">2 day</h2>
            <p class="text-xl font-bold">Learning streak</p>
          </div>
          <div class="rounded-lg bg-blue-200 p-4">
            <h2 class="text-4xl font-bold">2 day</h2>
            <p class="text-xl font-bold">Learning streak</p>
          </div>
        </div>
      </aside>
    </div>
  </section>
</ng-template>
