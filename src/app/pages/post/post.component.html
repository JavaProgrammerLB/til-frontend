<ng-container
  *ngTemplateOutlet="
    post;
    context: {
      post: postSig(),
      loading: loadingSig()
    }
  "
/>

<ng-template #post let-post="post" let-loading="loading">
  <section class="flex w-full max-w-3xl flex-col gap-8 px-4 py-20">
    @if (!loading) {
      <div class="flex flex-col gap-4">
        <h1 class="text-4xl font-extrabold">{{ post.title }}</h1>
        <p class="text-2xl">{{ post.description }}</p>
        <div class="flex items-center gap-2">
          <div class="avatar">
            <div
              class="w-12 rounded-full bg-gradient-to-tr from-blue-200 to-green-200"
            >
              <img
                alt="Avatar"
                onerror="this.className = 'hidden'"
                [src]="post.image"
              />
            </div>
          </div>
          <div class="flex items-center gap-4">
            <div class="flex flex-col overflow-auto">
              <h3 class="truncate font-bold">
                {{ post.name }}
              </h3>
              <p class="truncate text-sm text-gray-500">
                <span class="text-sm">{{ post.readTime }} min read</span> ·
                {{ post.postCreatedAt | date: 'MMM d, y' }} ·
                {{ post.likes }} likes
              </p>
            </div>
          </div>
        </div>
      </div>
      <div class="divider my-0 before:bg-divider after:bg-divider"></div>
      <article class="til-markdown prose">
        @if (post) {
          <markdown [data]="post.content" />
        }
      </article>
    } @else {
      <div class="mt-4 flex flex-col items-center justify-center gap-2">
        <span
          class="loading loading-spinner loading-lg bg-typography-primary"
        ></span>
        <p class="text-sm font-semibold">Loading</p>
      </div>
    }
  </section>
</ng-template>
